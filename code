#include <iostream>
#include <iomanip>
#include <vector>
using namespace std;

struct TFOption {
    string name;
    double factor;
};

int main() {
    const double BASELINE_PER_KM = 5.0;   //fuel consumed per km
    const double CO2_PER_FUEL    = 3.16;  //kg of CO2 emissions per fuel unit

    vector<TFOption> options = {
        {"Low bypass (~15% better)",    0.85},
        {"Medium bypass (~25% better)", 0.75},
        {"High bypass (~35% better)",   0.65},
        {"Geared high-bypass (~40% better)", 0.60}
    };

    cout << "Welcome To The Turbofan Estimator!\n";

    char again = 'y';
    while (again == 'y' || again == 'Y') {
        int passengers, choice;
        double distance;

        //input passengers must be > 0
        cout << "Number Of Passengers: ";
        cin >> passengers;
        while (passengers <= 0) {
            cout << "Please enter a positive number of passengers: ";
            cin >> passengers;
        }

        //error handling as input must be > 0
        cout << "Distance (KM): ";
        cin >> distance;
        while (distance <= 0) {
            cout << "Please enter a valid flight distance: ";
            cin >> distance;
        }

        // turbofan type
        cout << "\nChoose turbofan type:\n";
        for (int i = 0; i < options.size(); i++)
            cout << " " << (i+1) << ") " << options[i].name << "\n";

        cout << "Your choice: ";
        cin >> choice;
        while (choice < 1 || choice > options.size()) {
            cout << "Please enter a number between 1 and " << options.size() << ": ";
            cin >> choice;
        }

        // calculations
        double perKm = BASELINE_PER_KM * options[choice - 1].factor;
        double fuel  = distance * perKm;
        double co2   = fuel * CO2_PER_FUEL;
        
        //output
        cout << fixed << setprecision(2);
        cout << "\n--- Results ---\n";
        cout << "Distance (KM):       " << distance << "\n";
        cout << "Passengers:          " << passengers << "\n";
        cout << "Fuel per KM:         " << perKm << "\n";
        cout << "Total fuel:          " << fuel << "\n";
        cout << "Fuel per passenger:  " << fuel / passengers << "\n";
        cout << "Estimated CO2 (KG):  " << co2 << "\n";
        cout << "------------------\n";

        cout << "Would You Like To Run The Program Again? (y/n): ";
        cin >> again;
    }

    cout << "Goodbye!\n";
}
