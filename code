#include <iostream>
#include <iomanip>
#include <vector>
using namespace std;

struct TFOption {
    string name;
    double factor;
};

int main() {
    const double BASELINE_PER_KM = 5.0;   // fuel consumed per km
    const double CO2_PER_FUEL    = 3.16;  // kg of CO2 emissions per fuel unit consumed

    vector<TFOption> options = {
        {"Low bypass (~15% better)",    0.85},
        {"Medium bypass (~25% better)", 0.75},
        {"High bypass (~35% better)",   0.65},
        {"Geared high-bypass (~40% better)", 0.60}
    };

    cout << "Welcome To The Turbofan Estimator!\n";

    char again = 'y';
    while (again == 'y' || again == 'Y') {
        int passengers, choice;
        double distance;

        //passengers must be > 0
        cout << "Number Of Passengers: ";
        cin >> passengers;
        while (passengers <= 0) {
            cout << "Please enter a positive number of passengers: ";
            cin >> passengers;
        }

        //distance must be > 0
        cout << "Distance (km): ";
        cin >> distance;
        while (distance <= 0) {
            cout << "Please enter a positive flight distance: ";
            cin >> distance;
        }

        //choose turbofan type
        cout << "\nChoose turbofan type:\n";
        for (int i = 0; i < options.size(); i++)
            cout << " " << (i+1) << ") " << options[i].name << "\n";

        cout << "Your choice: ";
        cin >> choice;
        while (choice < 1 || choice > options.size()) {
            cout << "Please enter a number between 1 and " << options.size() << ": ";
            cin >> choice;
        }

        //calculations
        double perKm = BASELINE_PER_KM * options[choice - 1].factor;
        double fuel  = distance * perKm;
        double co2   = fuel * CO2_PER_FUEL;

        //passengers notice 
        if (passengers < 50) {
            cout << "\n[Notice!] This is a small passenger load — fuel per person will be high.\n";
        } else if (passengers >= 50 && passengers <= 200) {
            cout << "\n[Notice!] This is a medium-sized flight.\n";
        } else {
            cout << "\n[Notice!] This is a large passenger load — fuel efficiency per person improves.\n";
        }

        //switch for turbofan choice
        switch (choice) {
            case 1:
                cout << "[Turbofan] You chose Low bypass —> modestly efficient.\n";
                break;
            case 2:
                cout << "[Turbofan] You chose Medium bypass —> balanced performance.\n";
                break;
            case 3:
                cout << "[Turbofan] You chose High bypass —> very efficient.\n";
                break;
            case 4:
                cout << "[Turbofan] You chose Geared high-bypass —> maximum efficiency!\n";
                break;
            default:
                cout << "[Turbofan] Invalid Choice!\n";
                break;
        }

        //results
        cout << fixed << setprecision(2);
        cout << "\n--- Results ---\n";
        cout << "Distance (KM):       " << distance << "\n";
        cout << "Passengers:          " << passengers << "\n";
        cout << "Fuel per KM:         " << perKm << "\n";
        cout << "Total fuel:          " << fuel << "\n";
        cout << "Fuel per passenger:  " << fuel / passengers << "\n";
        cout << "Estimated CO2 (KG):  " << co2 << "\n";
        cout << "------------------\n";

        cout << "Would You Like To Run The Program Again? (y/n): ";
        cin >> again;
    }

    cout << "Goodbye, Thank You!\n";
}
